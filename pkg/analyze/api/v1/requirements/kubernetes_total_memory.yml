raw:
  conditions:
    - eval:
        operator: and
        statements:
          - '{{repl .Empty}}'
        variables:
          - Empty: '{{repl not ._Ref}}'
      severity: error
      message: >-
        Failed to detect Kubernetes total memory
    - eval:
        operator: and
        statements:
          - '{{repl lt (atoi .Memory) (atoi .Min)}}'
        variables:
          - Memory: '{{repl jq ._Ref ".items[].status.capacity.memory" | jqMessagesToStringSlice | sumQuantities}}'
          - Min: '{{repl parseQuantity "{{{.Min}}}"}}'
      severity: error
      message: >-
        Total memory for your Kubernetes cluster {{repl (atoi .Memory) | formatQuantity}}B is less than the minimum
        required memory of {{{.Min}}}B
message: Kubernetes total memory must be at least {{{.Min}}}B
 